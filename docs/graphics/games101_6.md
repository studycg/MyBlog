## 采样产生的走样(Artifacts)

1. 锯齿（空间采样）
2. 摩尔纹（空间采样）
3. 车轮效应（时间采样）

本质：信号变化太快了，采样的速度没跟上。



## 如何做反走样？

在采样之前做一个模糊/滤波

那先采样再模糊可以吗？不行！

滤波：去掉特定频率的内容。

![image-20251230202329374](./assets/image-20251230202329374.png)

## 关于信号的知识

![image-20251230202403498](./assets/image-20251230202403498.png)

傅里叶级数：一个周期函数可以用无穷多个三角函数逼近。

![image-20251230202446832](./assets/image-20251230202446832.png)

傅里叶变化可以使两个函数互相转换。

### 当取样频率小于信号频率时

![image-20251230202531935](./assets/image-20251230202531935.png)

![image-20251230202539903](./assets/image-20251230202539903.png)

**高通滤波**

边界的信号变化大，所以只保留高频的信号就是保留了**边界**。

**低通滤波**

没有边界的概念后整个图就会很**模糊**。

> 此处是<数字图像处理>相应内容

**滤波=平均=卷积**

图形学中的卷积操作被简化了，不是严格意义上的数学卷积。

时域的卷积等于频域的乘积

![image-20251230202616295](./assets/image-20251230202616295.png)

![image-20251230202628317](./assets/image-20251230202628317.png)

![image-20251230185814340](./assets/image-20251230185814340.png)

##  采样就是在重复原始信号的频谱

![image-20251230190620652](./assets/image-20251230190620652.png)

采样的不够快就会导致原始频谱复制粘贴的间隔很小（时域和频域上有很多相反的逻辑）

![image-20251230190916547](./assets/image-20251230190916547.png)

频谱在经过复制粘贴/搬移的角度上发生了混合，所以此处就发生了走样。

若像素很小相当于密集的采样，像素很大相当于稀疏的采样。

## 反走样

1. 提高采样率（使用更多下像素数目）
2. 先做模糊再采样

模糊：低通滤波、将高频信息去掉。

![image-20251230191426524](./assets/image-20251230191426524.png)

此时不再发生混叠

为什么之前的先取样再模糊不行呢？因为先重叠再截断，不能保证截断的地方就是重叠的地方。

## 模糊应用在三角形上

使用一个像素大小的box-filter进行滤波

![image-20251230191852495](./assets/image-20251230191852495.png)

![image-20251230191750123](./assets/image-20251230191750123.png)

但是计算像素内三角形的面积本身也不是一件容易的事。

## MSAA

MSAA解决的是**模糊**的操作，采样隐含在了MSAA操作中。而不是真实的提高了分辨率。

![image-20251230192544603](./assets/image-20251230192544603.png)

![image-20251230192551112](./assets/image-20251230192551112.png)

![image-20251230192557111](./assets/image-20251230192557111.png)

![image-20251230192608541](./assets/image-20251230192608541.png)

![image-20251230192615632](./assets/image-20251230192615632.png)

![image-20251230192622023](./assets/image-20251230192622023.png)

MSAA的代价：

- 增大了计算量

其它抗锯齿：

- FXAA(Fast Approximate AA)：先得到有锯齿的图，找到锯齿边界，并将边界换为没有锯齿的边界。
- TAA(Temporal AA)：复用上一帧的结果。相当于MSAA分布在时间上。

超分辨率（Super resolution）：

- 高分辨率但是采样率不够
- DLSS（Deep Learning Super Sampling）